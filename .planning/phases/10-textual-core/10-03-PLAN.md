---
phase: 10-textual-core
plan: 03
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - hfs/tui/theme.py
  - hfs/tui/styles/theme.tcss
  - hfs/tui/widgets/status_bar.py
  - hfs/tui/widgets/__init__.py
  - hfs/tui/app.py
  - hfs/tui/screens/chat.py
autonomous: true

must_haves:
  truths:
    - "Visual theme applies yellow/amber primary color (#F59E0B)"
    - "Triad types have distinct colors (Hierarchical blue, Dialectic purple, Consensus green)"
    - "Status bar shows model name, token count, and active agents"
    - "Theme is dark mode with consistent styling"
  artifacts:
    - path: "hfs/tui/theme.py"
      provides: "HFS_THEME definition with colors and variables"
      min_lines: 25
    - path: "hfs/tui/styles/theme.tcss"
      provides: "Textual CSS theme file"
      min_lines: 50
    - path: "hfs/tui/widgets/status_bar.py"
      provides: "HFSStatusBar with reactive model/token/agent display"
      min_lines: 40
  key_links:
    - from: "hfs/tui/app.py"
      to: "hfs/tui/theme.py"
      via: "theme registration"
      pattern: "register_theme|HFS_THEME"
    - from: "hfs/tui/screens/chat.py"
      to: "hfs/tui/widgets/status_bar.py"
      via: "compose"
      pattern: "HFSStatusBar"
---

<objective>
Create the HFS visual theme with yellow/amber colors, triad-type color coding, and an informative status bar.

Purpose: This establishes the visual identity of HFS - the yellow/amber bee/hexagon theme with distinct colors for different triad types. The status bar provides at-a-glance information about the current session.

Output: Themed application with yellow/amber palette, triad colors, and status bar showing model/tokens/agents
</objective>

<execution_context>
@C:\Users\jinwi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jinwi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-textual-core/10-CONTEXT.md
@.planning/phases/10-textual-core/10-RESEARCH.md

# Prior plan output
@.planning/phases/10-textual-core/10-01-SUMMARY.md

# Files to modify
@hfs/tui/app.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create HFS theme and CSS</name>
  <files>
    hfs/tui/theme.py
    hfs/tui/styles/theme.tcss
  </files>
  <action>
1. Create hfs/tui/styles/ directory (mkdir -p)

2. Create hfs/tui/theme.py:
   - Import Theme from textual.theme
   - Define HFS_THEME = Theme(...) with:
     - name="hfs"
     - primary="#F59E0B" (yellow/amber - THEME-01)
     - secondary="#D97706" (darker amber)
     - accent="#FCD34D" (light yellow)
     - foreground="#F5F5F5" (light text)
     - background="#1A1A1A" (dark bg)
     - surface="#262626" (slightly lighter)
     - panel="#333333" (panels/cards)
     - warning="#EAB308" (yellow warning)
     - error="#EF4444" (red error)
     - success="#22C55E" (green success)
     - dark=True
     - variables dict with triad colors:
       - "$hfs-hierarchical": "#3B82F6" (blue)
       - "$hfs-dialectic": "#A855F7" (purple)
       - "$hfs-consensus": "#22C55E" (green)

3. Create hfs/tui/styles/theme.tcss with Textual CSS:
   - Screen styling: background $background
   - MessageList: padding, border styling
   - ChatMessage: margin between messages, user vs assistant distinction
   - ChatMessage.user: different styling (maybe right border or bg tint)
   - ChatMessage.assistant: left border with $primary color
   - ChatInput: border, focus styling with $primary
   - HFSStatusBar: background $surface, padding, text alignment
   - PulsingDot: color $primary
   - Markdown code blocks: syntax highlighting compatible styling
   - Use $hfs-hierarchical, $hfs-dialectic, $hfs-consensus variables for triad-specific elements

Keep it clean and minimal per CONTEXT.md - "Claude Code / OpenCode / Gemini CLI aesthetic"
  </action>
  <verify>
    - `python -c "from hfs.tui.theme import HFS_THEME; print(HFS_THEME.primary)"` prints #F59E0B
    - theme.tcss file exists with non-empty content
  </verify>
  <done>
    - HFS_THEME defined with yellow/amber colors and triad variables
    - theme.tcss exists with component styling
    - Colors follow THEME-01, THEME-02 requirements
  </done>
</task>

<task type="auto">
  <name>Task 2: Create status bar and integrate theme into app</name>
  <files>
    hfs/tui/widgets/status_bar.py
    hfs/tui/widgets/__init__.py
    hfs/tui/app.py
    hfs/tui/screens/chat.py
  </files>
  <action>
1. Create hfs/tui/widgets/status_bar.py (HFSStatusBar class):
   - Extend Static (or Horizontal container)
   - Reactive attributes:
     - model_name: str = "claude-3-sonnet" (default)
     - token_count: int = 0
     - active_agents: list[str] = []
   - compose() yields Static widgets for each section:
     - Model name (left)
     - Token count (center)
     - Active agents (right)
   - watch_* methods update the displays when reactives change
   - DEFAULT_CSS: horizontal layout, background $surface, padding, text styling
   - Public methods to update values (or just set reactives directly)

2. Update hfs/tui/widgets/__init__.py:
   - Add HFSStatusBar to exports

3. Update hfs/tui/app.py:
   - Import HFS_THEME from hfs.tui.theme
   - Import path to theme.tcss
   - Set CSS_PATH class variable to point to styles/theme.tcss
   - In on_mount(): register_theme(HFS_THEME) and self.theme = "hfs"

4. Update hfs/tui/screens/chat.py:
   - Import HFSStatusBar
   - Add HFSStatusBar to compose() at the bottom (below input or as footer)
   - Wire up token count updates (increment when messages sent - mock for now)
   - No header per CONTEXT.md - maximize chat space

Layout from top to bottom:
- MessageList (fills space, scrollable)
- PulsingDot (inline where response will appear)
- ChatInput (at bottom, auto-grows)
- HFSStatusBar (footer)
  </action>
  <verify>
    - `hfs` shows yellow/amber themed interface
    - Status bar visible at bottom with model, tokens, agents
    - User messages have distinct styling from assistant messages
    - Theme colors match spec (#F59E0B primary)
  </verify>
  <done>
    - HFSStatusBar displays model, token count, active agents
    - Theme registered and applied on app mount
    - Visual styling consistent with yellow/amber palette
    - Chat interface uses theme colors throughout
  </done>
</task>

</tasks>

<verification>
All verification for this plan:
1. App launches with dark theme and yellow/amber colors
2. Primary color is #F59E0B (visible in borders, accents)
3. Status bar at bottom shows "claude-3-sonnet", "0 tokens", agents info
4. User messages visually distinct from assistant messages
5. Theme variables for triad colors are defined (verify in Python)
6. Overall aesthetic is clean and minimal (like Claude Code)
</verification>

<success_criteria>
- Yellow/amber (#F59E0B) is the primary color throughout
- Triad color variables defined ($hfs-hierarchical, $hfs-dialectic, $hfs-consensus)
- Status bar shows model name, token count, active agents
- Dark theme applied (background #1A1A1A)
- Clean, minimal aesthetic matching Claude Code / OpenCode style
</success_criteria>

<output>
After completion, create `.planning/phases/10-textual-core/10-03-SUMMARY.md`
</output>
